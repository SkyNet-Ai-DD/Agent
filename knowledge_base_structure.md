# Структура базы знаний и данных

## Базы стандартов (ГОСТ, СНиП)

Для эффективной работы мета-агента необходимо создать структурированную базу стандартов. Рассмотрим два варианта реализации:

### Вариант 1: Векторная база данных (Qdrant, Pinecone)

#### Преимущества:
- Семантический поиск по смыслу запроса
- Возможность находить релевантные стандарты даже по частично совпадающим ключевым словам
- Высокая точность поиска при работе с технической документацией

#### Структура данных:
- **ID стандарта**: Уникальный идентификатор (например, ГОСТ 2.301-68)
- **Название**: Полное название стандарта
- **Категория**: Классификация (например, "Чертежи", "Допуски", "Материалы")
- **Описание**: Краткое описание содержания стандарта
- **Текст стандарта**: Полный текст стандарта, разбитый на chunks для векторизации
- **Векторное представление**: Embeddings текста стандарта для поиска

#### Процесс оцифровки:
1. Сбор текстов стандартов из официальных источников
2. Предобработка текста (очистка от лишних символов, форматирование)
3. Разбиение текста на chunks подходящего размера для модели embeddings
4. Генерация векторных представлений с помощью модели embeddings
5. Загрузка данных в векторную базу данных

### Вариант 2: Реляционная база данных (PostgreSQL) или Google Sheets

#### Преимущества:
- Простота реализации и поддержки
- Четкая структура данных
- Легкость интеграции с n8n через готовые ноды

#### Структура таблицы:
| Поле | Тип данных | Описание |
|------|------------|----------|
| id | SERIAL | Уникальный идентификатор |
| номер | VARCHAR(50) | Номер стандарта (например, ГОСТ 2.301-68) |
| название | TEXT | Полное название стандарта |
| категория | VARCHAR(100) | Категория стандарта |
| ключевые_слова | TEXT[] | Массив ключевых слов для поиска |
| описание | TEXT | Краткое описание содержания |
| ссылка | VARCHAR(200) | Ссылка на официальный документ |

#### Процесс оцифровки:
1. Создание таблицы в PostgreSQL или Google Sheets
2. Ручной или полуавтоматический ввод данных по стандартам
3. Индексация полей для ускорения поиска

## Техническая литература и мануалы

Для расширения возможностей агента по ответам на сложные технические вопросы необходимо интегрировать техническую литературу и мануалы.

### Источники данных:
- Учебники по машиностроению
- Методические пособия
- Технические руководства по оборудованию
- Статьи из научных журналов
- Документация по программному обеспечению (AutoCAD, SolidWorks)

### Подход к структурированию:
Аналогично стандартам, литература может храниться в векторной базе данных для семантического поиска. Каждый документ разбивается на chunks, для которых генерируются embeddings.

### Метаданные для литературы:
- **ID документа**: Уникальный идентификатор
- **Название**: Заголовок документа
- **Авторы**: Список авторов
- **Год публикации**: Год издания
- **Тип**: Категория (учебник, статья, руководство)
- **Теги**: Ключевые темы документа
- **Аннотация**: Краткое содержание
- **Текст документа**: Основное содержание, разбитое на chunks
- **Векторное представление**: Embeddings текста документа

## Интеграция с n8n

Для использования баз знаний в workflows n8n будут созданы специализированные ноды:

### Для векторной базы данных:
- **Нода поиска**: Принимает текстовый запрос, генерирует embedding и выполняет поиск по векторной базе
- **Нода формирования контекста**: Комбинирует найденные chunks в контекст для LLM

### Для реляционной базы данных:
- **Нода SQL-запроса**: Выполняет SQL-запросы к базе стандартов
- **Нода обработки результатов**: Форматирует результаты запроса для дальнейшего использования

## Обновление базы знаний

Для поддержания актуальности базы знаний необходимо регулярное обновление:

### Процесс обновления:
1. Мониторинг новых стандартов и технической литературы
2. Проверка актуальности существующих документов
3. Добавление новых записей в базу
4. Удаление устаревших стандартов
5. Обновление embeddings при изменении содержания документов

### Автоматизация обновления:
- Создание workflow в n8n для регулярной проверки официальных источников
- Интеграция с API официальных репозиториев стандартов (если доступны)
- Уведомления о новых или измененных стандартах